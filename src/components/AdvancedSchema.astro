---
export interface Props {
  type?: 'person' | 'organization' | 'service' | 'website' | 'article';
  data?: any;
}

const { type = 'person', data = {} } = Astro.props;

const generateSchema = (type: string, data: any) => {
  const baseUrl = 'https://maykolsalgado.me';
  
  switch (type) {
    case 'person':
      return {
        "@context": "https://schema.org",
        "@type": "Person",
        "name": "Maykol Salgado",
        "alternateName": "Maykol Nicolas Salgado Ramos",
        "url": baseUrl,
        "image": `${baseUrl}/images/og-maykol-salgado.svg`,
        "jobTitle": "Desarrollador Full Stack",
        "worksFor": {
          "@type": "Organization",
          "name": "Freelance"
        },
        "alumniOf": {
          "@type": "Organization",
          "name": "Instituto AIEP"
        },
        "knowsAbout": [
          "Desarrollo Web",
          "React",
          "TypeScript", 
          "Node.js",
          "PostgreSQL",
          "Sistemas Empresariales",
          "CMS Personalizado",
          "APIs RESTful",
          "Desarrollo Full Stack",
          "Consultoría Técnica"
        ],
        "hasOccupation": {
          "@type": "Occupation",
          "name": "Desarrollador Full Stack",
          "description": "Especialista en desarrollo de sistemas empresariales y soluciones tecnológicas para PYMEs",
          "skills": [
            "React",
            "TypeScript",
            "Node.js", 
            "Express.js",
            "PostgreSQL",
            "Prisma ORM",
            "Git",
            "API Development",
            "Database Design",
            "System Architecture"
          ]
        },
        "address": {
          "@type": "PostalAddress",
          "addressCountry": "CL",
          "addressRegion": "Región Metropolitana"
        },
        "contactPoint": [
          {
            "@type": "ContactPoint",
            "telephone": "+56972438969",
            "contactType": "primary",
            "availableLanguage": ["Spanish"],
            "hoursAvailable": "Mo-Fr 09:00-18:00"
          }
        ],
        "sameAs": [
          "https://www.linkedin.com/in/maykol-nicolas-salgado-ramos-788366371/",
          "https://x.com/mayk0ldev",
          "https://github.com/mayk0l"
        ]
      };

    case 'organization':
      return {
        "@context": "https://schema.org",
        "@type": "Organization",
        "name": "Maykol Salgado - Desarrollo Full Stack",
        "alternateName": ["Maykol Salgado", "maykolsalgado"],
        "url": baseUrl,
        "logo": {
          "@type": "ImageObject",
          "url": `${baseUrl}/logo.svg`,
          "width": 120,
          "height": 40,
          "contentUrl": `${baseUrl}/logo.svg`,
          "caption": "Maykol Salgado Logo"
        },
        "image": {
          "@type": "ImageObject",
          "url": `${baseUrl}/images/og-maykol-salgado.svg`,
          "width": 1200,
          "height": 630,
          "contentUrl": `${baseUrl}/images/og-maykol-salgado.svg`,
          "caption": "Maykol Salgado - Desarrollador Full Stack"
        },
        "description": "Desarrollo de sistemas empresariales y soluciones tecnológicas para PYMEs en Chile y LATAM",
        "address": {
          "@type": "PostalAddress",
          "addressCountry": "CL",
          "addressRegion": "Región Metropolitana",
          "addressLocality": "Chile"
        },
        "contactPoint": [
          {
            "@type": "ContactPoint",
            "telephone": "+56972438969",
            "contactType": "customer service",
            "availableLanguage": ["Spanish", "English"],
            "areaServed": ["CL", "LATAM"]
          },
          {
            "@type": "ContactPoint",
            "email": "maykol@maykolsalgado.me",
            "contactType": "customer service",
            "availableLanguage": ["Spanish", "English"],
            "areaServed": ["CL", "LATAM"]
          }
        ],
        "founder": {
          "@type": "Person",
          "name": "Maykol Salgado",
          "url": baseUrl
        },
        "foundingDate": "2024",
        "areaServed": [
          {
            "@type": "Country",
            "name": "Chile"
          },
          {
            "@type": "Place",
            "name": "Latin America"
          }
        ],
        "serviceType": [
          "Desarrollo Web",
          "Sistemas Empresariales", 
          "CMS Personalizado",
          "Consultoría Técnica",
          "APIs RESTful",
          "React Development",
          "TypeScript Development",
          "Node.js Development"
        ],
        "sameAs": [
          "https://www.linkedin.com/in/maykol-nicolas-salgado-ramos-788366371/",
          "https://x.com/mayk0ldev",
          "https://github.com/mayk0l"
        ],
        "knowsAbout": [
          "React", "TypeScript", "Node.js", "PostgreSQL", "JavaScript",
          "Web Development", "Fullstack Development", "Software Engineering",
          "Enterprise Systems", "CMS Development", "API Development"
        ]
      };

    case 'service':
      return {
        "@context": "https://schema.org",
        "@type": "Service",
        "name": "Desarrollo de Sistemas Empresariales",
        "description": "Desarrollo de aplicaciones web personalizadas, CMS y sistemas de gestión para empresas",
        "provider": {
          "@type": "Person",
          "name": "Maykol Salgado"
        },
        "areaServed": ["Chile", "Latin America"],
        "hasOfferCatalog": {
          "@type": "OfferCatalog",
          "name": "Servicios de Desarrollo",
          "itemListElement": [
            {
              "@type": "Offer",
              "itemOffered": {
                "@type": "Service",
                "name": "Desarrollo de CMS Personalizado",
                "description": "Sistemas de gestión de contenido adaptados a las necesidades específicas del negocio"
              }
            },
            {
              "@type": "Offer", 
              "itemOffered": {
                "@type": "Service",
                "name": "Desarrollo de APIs RESTful",
                "description": "APIs escalables y seguras para integración de sistemas"
              }
            },
            {
              "@type": "Offer",
              "itemOffered": {
                "@type": "Service", 
                "name": "Consultoría Técnica",
                "description": "Asesoramiento en arquitectura de software y selección de tecnologías"
              }
            }
          ]
        }
      };

    case 'website':
      return {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "Maykol Salgado - Desarrollador Full Stack",
        "url": baseUrl,
        "description": "Portafolio profesional de Maykol Salgado, desarrollador full stack especializado en sistemas empresariales",
        "author": {
          "@type": "Person",
          "name": "Maykol Salgado"
        },
        "publisher": {
          "@type": "Person",
          "name": "Maykol Salgado"
        },
        "potentialAction": {
          "@type": "SearchAction",
          "target": `${baseUrl}/search?q={search_term_string}`,
          "query-input": "required name=search_term_string"
        },
        "mainEntity": {
          "@type": "Person",
          "name": "Maykol Salgado"
        }
      };

    case 'article':
      return {
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": data.title || "Artículo de Blog",
        "description": data.description || "",
        "author": {
          "@type": "Person",
          "name": "Maykol Salgado",
          "url": baseUrl
        },
        "publisher": {
          "@type": "Person",
          "name": "Maykol Salgado",
          "logo": {
            "@type": "ImageObject",
            "url": `${baseUrl}/logo.svg`
          }
        },
        "datePublished": data.datePublished || new Date().toISOString(),
        "dateModified": data.dateModified || data.datePublished || new Date().toISOString(),
        "url": data.url || baseUrl,
        "image": data.image || `${baseUrl}/images/og-maykol-salgado.svg`,
        "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": data.url || baseUrl
        }
      };

    default:
      return null;
  }
};

const schemaData = generateSchema(type, data);
---

{schemaData && (
  <script type="application/ld+json" set:html={JSON.stringify(schemaData)}></script>
)}
